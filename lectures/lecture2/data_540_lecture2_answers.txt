DATA 540 Lecture 2 Answers
--------------------------

Slide #6 - Database Identifier Question

Answer: D) field_


Slide #7 - Delimited Database Identifier Question

Answer: A (true)  This is a delimited identifier that allows using reserved words, special symbols, and spaces.


Slide #18 - Enforcing Referential Integrity Question

Answer: D (but also accept C)

Technically SET DEFAULT can be used, but its meaning may be strange (as assigning hours to someone else).  SET NULL cannot be used as eno is a primary key field.  ON UPDATE CASCADE modifies FK rows on a PK row change.

Note: SET DEFAULT technically would not work with current WorksOn definition as we did not set a default value for WorksOn.eno in its table creation.  However, if no default is specified, in PostgreSQL at least, it defaults to NULL. That would be an issue as eno is a primary key. Even if there was a value, it could trigger a PK issue if the default employee number used is already working on the project.


Slide #21 - Creating the Example Database

Answer:
CREATE TABLE dept (
   dno 		CHAR(5),
   dname	VARCHAR(40),
   mgreno	CHAR(5),
   PRIMARY KEY (dno)
   FOREIGN KEY (mgreno) REFERENCES emp(eno) 
      ON DELETE SET NULL ON UPDATE CASCADE
);

CREATE TABLE proj (
   pno		CHAR(5),
   pname	VARCHAR(40),
   budget   DECIMAL(10,2),
   dno		CHAR(5),
   PRIMARY KEY (pno),
   FOREIGN KEY (dno) REFERENCES dept(dno) 
     ON DELETE CASCADE ON UPDATE CASCADE
);

Slide #28 - CREATE TABLE Question

Answer: B
True statement:
1) Each field in the CREATE TABLE statement is separated by a comma.


Slide #33 - Try it: CREATE TABLE

create table mydata (
  num int,
  message varchar(50),
  amount decimal(8,2)
 );


Slide #37 - Try it: INSERT

insert into mydata values (1, 'Hello', 99.45);
insert into mydata values (2, 'Goodbye', 55.99);
insert into mydata (num, message) values (3, 'No Amount');


Slide #39 - Try it: UPDATE

UPDATE mydata SET amount = 99.99

UPDATE mydata SET num=10 WHERE num = 1

UPDATE mydata SET message = 'Changed' WHERE num = 2


Slide #41 - Try it: DELETE

DELETE FROM mydata WHERE num = 1

DELETE FROM mydata WHERE message > 'C'

DELETE FROM mydata


Slide #42 - INSERT Question

Answer: A (no true statements)


Slide #43 - UPDATE Question

Answer: E (all true statements)


Slide #44 - DELETE Question

Answer: D 
True statements:
1) A DELETE with no WHERE clause will delete all rows.
3) It is possible to DELETE zero or more rows using a WHERE clause.
4) A DELETE statement may delete zero rows when executed.

Slide #45 - Practice Questions

Answer:

1) INSERT INTO dept (dno, dname, mgreno) VALUES ('D5', 'Useless' null);  OR: INSERT INTO dept (dno, dname) VALUES ('D5', 'Useless')
2) INSERT INTO workson (eno, pno) VALUES ('E1', 'P3');
3) DELETE FROM emp;
4) DELETE FROM workson WHERE hours > 20;
5) UPDATE emp SET salary=salary*0.8
6) UPDATE proj SET budget = budget*1.1 WHERE dno='D3'

Change FK constraints to execute DELETE FROM emp:
ALTER TABLE dept DROP FOREIGN KEY FK_dept_emp;
ALTER TABLE workson DROP FOREIGN KEY FK_workson_emp;


